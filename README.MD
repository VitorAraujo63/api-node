# Course Management API

Uma API REST desenvolvida em **Node.js** e **TypeScript** focada no gerenciamento de cursos. Este projeto foi criado como um desafio t√©cnico para aplicar conceitos modernos de valida√ß√£o, documenta√ß√£o e ORM.

## üõ†Ô∏è Tecnologias Utilizadas

- **Node.js** + **TypeScript**
- **Fastify (v5)**: Framework web r√°pido e com baixo overhead.
- **Drizzle ORM**: Para intera√ß√£o com o banco de dados e gerenciamento de migrations.
- **PostgreSQL**: Banco de dados relacional (via Docker).
- **Zod**: Para valida√ß√£o de esquemas e tipagem forte (integrado via `fastify-type-provider-zod`).
- **Swagger (@scalar/fastify-api-reference)**: Documenta√ß√£o interativa da API gerada automaticamente.
- **Docker**: Containeriza√ß√£o do banco de dados e ambiente.

---

## üèóÔ∏è Estrutura do Projeto

A estrutura foi pensada para separar responsabilidades de rotas, esquemas de banco e configura√ß√µes.

- `src/server.ts`: Ponto de entrada, configura√ß√£o do Fastify e Swagger.
- `src/routes/`: Defini√ß√£o das rotas e valida√ß√µes Zod.
- `src/database/`: Configura√ß√£o do cliente Drizzle e Schemas do banco.
- `drizzle.config.ts`: Configura√ß√£o do Drizzle Kit.
- `docker-compose.yaml`: Orquestra√ß√£o dos servi√ßos (App + DB).

---

## Documenta√ß√£o / Swagger
Quando `NODE_ENV` === "development":
- OpenAPI via `@fastify/swagger`
- UI de documenta√ß√£o em `/docs` via `@scalar/fastify-api-reference`
Acesse: `http://localhost:3333/docs` (apenas em dev)

---

## Fluxo principal (Mermaid)

Abaixo est√° o diagrama em Mermaid do fluxo principal da API em formato de sequ√™ncia, seguindo fielmente o fluxo de valida√ß√µes e intera√ß√µes com o banco:

```mermaid
sequenceDiagram
  participant C as Client
  participant S as Fastify Server
  participant V as Zod Validator
  participant DB as Drizzle + PostgreSQL

  C->>S: POST /courses {title}
  S->>V: Validar body (title: string, min 5)
  V-->>S: OK ou Erro 400 ("T√≠tulo precisa de 5 caracteres no m√≠nimo")
  alt v√°lido
    S->>DB: INSERT INTO courses (title)
    DB-->>S: {id}
    S-->>C: 201 {courseId: uuid}
  else inv√°lido
    S-->>C: 400 {validationError}
  end

  C->>S: GET /courses
  S->>DB: SELECT id, title FROM courses
  DB-->>S: lista [{id, title, ...}, ...]
  S-->>C: 200 {courses: [...]}

  C->>S: GET /courses/:id
  S->>V: Validar param id (uuid)
  V-->>S: OK ou Erro 400
  alt encontrado
    S->>DB: SELECT * FROM courses WHERE id=...
    DB-->>S: course
    S-->>C: 200 {course}
  else n√£o encontrado
    S-->>C: 404 {message: "Course not found"}
  end
```

---
# Certificado 

![Certificado de participa√ß√£o do curso da Rocketseat de nodejs](./certificado/image.png)